<!DOCTYPE html>
<html>





<head>
  <title>Quarkus - Neo4j - 2.2</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src https://dpm.demdex.net; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com https://static.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com https://app.mailjet.com http://www.youtube.com http://www.googleadservices.com https://googleads.g.doubleclick.net https://dpm.demdex.net https://giscus.app; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self'; frame-src https://www.googletagmanager.com https://www.youtube.com https://embed.restream.io https://app.mailjet.com https://giscus.app; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/2.2/guides/neo4j" />
  <meta property="og:title" content="Neo4j - 2.2" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/neo4j">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
    </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Quarkusとは <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/continuum" class="">リアクティブ</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">学ぶ<i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ガイド</a></li>
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">コミュニティ <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="/publications" class="">出版物</a></li>
          <li><a href="/awards" class="">受賞</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/" >ENGLISH</a></li>
          <li><a href="https://ja.quarkus.io/">JAPANESE</a></li>
          </ul>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    



<div class="full-width-version-bg grey align-self">
  <div class="grid-wrapper">
    <div class="grid__item width-6-12">
      <p class="returnlink"><i class="fas fa-angle-left"></i><a href="/version/2.2/guides/"> Back to Guides</a></p>
    </div>
    <div class="grid__item width-6-12 align-self-center text-right hide-mobile">
      <label id="guide-version-label">Select Guide Version</label>
      <select id="guide-version-dropdown">
        
      
        
        
        
        
      
        
        
        
        
      
        
        
        
        
      
        
        
        
        
          
        <option value="2.2" selected>2.2</option>
        
        
      
        
        
        
        
          
        <option value="1.11" >1.11</option>
        
        
      
    
      </select>
    </div>
  </div>
</div>

<div class="grid-wrapper guide">
  <div class="grid__item width-12-12 width-12-12-mobile">
    <h1 class="text-caps">Neo4j </h1>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#プログラミングモデル">プログラミングモデル</a></li>
<li><a href="#ドメイン">ドメイン</a></li>
<li><a href="#前提条件">前提条件</a>
<ul class="sectlevel2">
<li><a href="#setup-neo4j">Setup Neo4j</a></li>
</ul>
</li>
<li><a href="#ソリューション">ソリューション</a></li>
<li><a href="#creating-the-maven-project">Creating the Maven project</a></li>
<li><a href="#設定">設定</a></li>
<li><a href="#ドライバーの使用">ドライバーの使用</a>
<ul class="sectlevel2">
<li><a href="#総論">総論</a></li>
<li><a href="#ノードの読み取り">ノードの読み取り</a></li>
<li><a href="#ノードの作成">ノードの作成</a></li>
<li><a href="#単一ノードの読み取り">単一ノードの読み取り</a></li>
<li><a href="#ノードの削除">ノードの削除</a></li>
</ul>
</li>
<li><a href="#次のステップ">次のステップ</a>
<ul class="sectlevel2">
<li><a href="#パッケージング">パッケージング</a></li>
<li><a href="#接続のヘルスチェック">接続のヘルスチェック</a></li>
<li><a href="#ドライバーメトリクス">ドライバーメトリクス</a></li>
<li><a href="#explore-cypher-and-the-graph">Explore Cypher and the Graph</a></li>
<li><a href="#reactive">リアクティブ型へ</a></li>
</ul>
</li>
<li><a href="#設定リファレンス">設定リファレンス</a></li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Neo4 <a href="https://neo4j.com">jは</a> 、Neo4jが開発したグラフデータベース管理システムです。Neo4jは、データそのものだけでなく、特にデータ間の関係性に焦点を当てたネイティブグラフデータベースです。Neo4jは、データをプロパティー・グラフとして格納しますが、これは、我々が呼ぶところの頂点やノードをエッジやリレーションシップで接続したものです。どちらもプロパティーを持つことができます。</p>
</div>
<div class="paragraph">
<p>Neo4jは、SQLのような宣言的な問い合わせ言語であるCypherを提供しています。Cypherは、グラフの問い合わせとノードとリレーションシップの作成や更新の両方に使用されます。宣言的な言語として、それはデータベースにどのようにそれをするかではなく、何をすべきかを伝える為に使用されます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="https://neo4j.com/docs/cypher-manual/current/">Neo4jのCypherマニュアル</a> でCypherについて詳しく説明しています。
CypherはNeo4jだけではなく、例えば <a href="https://github.com/opencypher/morpheus">Apache Spark</a> にも登場しています。
<a href="http://www.opencypher.org">OpenCypher</a> と呼ばれる仕様も利用可能です。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>クライアントは、ボルトと呼ばれるプロトコルを介してデータベースと通信します。</p>
</div>
<div class="paragraph">
<p>Neo4j - DB-Enginesのランキングで最も人気のあるグラフデータベースとして - 様々な言語のための様々なドライバーを提供しています。</p>
</div>
<div class="paragraph">
<p>Quarkus Neo4jエクステンションは、公式の <a href="https://github.com/neo4j/neo4j-java-driver">Neo4j Java Driver</a> をベースにしています。このエクステンションは、Quarkusアプリケーションで使用できるように設定されたドライバーのインスタンスを提供します。このエクステンションを使用すると、Bolt上で任意のCypher文を発行することができます。これらのステートメントは、単純なCRUDステートメントだけでなく、複雑なクエリ、グラフアルゴリズムの呼び出しなども可能です。</p>
</div>
<div class="paragraph">
<p>ドライバー自体はApache 2.0ライセンスでリリースされていますが、Neo4j自体はGPL3ライセンスでオープンソースの「コミュニティ版」として利用可能で、オンラインバックアップと高可用性のエクステンションはクローズドソースの商用ライセンスの下でライセンスされています。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>この技術は、previewと考えられています。</p>
</div>
<div class="paragraph">
<p><em>preview</em> では、下位互換性やエコシステムでの存在は保証されていません。具体的な改善には設定や API の変更が必要になるかもしれませんが、 <em>stable</em> 版になるための計画は現在進行中です。フィードバックは <a href="https://groups.google.com/d/forum/quarkus-dev">メーリングリスト</a> や <a href="https://github.com/quarkusio/quarkus/issues">GitHub の課題管理</a> で受け付けています。</p>
</div>
<div class="paragraph">
<p>とりうるエクステンションステータスの完全なリストについては、 <a href="https://quarkus.io/faq/#extension-status">FAQの項目を</a> 参照してください。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="プログラミングモデル"><a class="anchor" href="#プログラミングモデル"></a>プログラミングモデル</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ドライバーとQuarkusエクステンションは、3つの異なるプログラミングモデルをサポートしています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>データベースアクセスのブロック (標準の JDBC によく似ています)</p>
</li>
<li>
<p>Asynchronous programming based on JDK&#8217;s completable futures and related infrastructure</p>
</li>
<li>
<p><a href="http://www.reactive-streams.org">Reactive Streams</a> に基づくリアクティブプログラミング</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>リアクティブ・プログラミング・モデルは、Neo4jの4.0+バージョンに対して接続されている場合にのみ利用可能です。Neo4jのリアクティブ・プログラミングは、完全にエンド・ツー・エンドのリアクティブであるため、バックプレッシャーをサポートするサーバーが必要です。</p>
</div>
<div class="paragraph">
<p>このガイドでは、次のことを学びます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>プロジェクトにNeo4jエクステンションを追加</p>
</li>
<li>
<p>ドライバーの設定</p>
</li>
<li>
<p>そして、Neo4jデータベースにアクセスするためにドライバーを使用する方法</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>このガイドでは、Neo4jへの非同期アクセスに焦点を当てます。このガイドの最後に、リアクティブ型のバージョンがありますが、それは、4.0データベースのバージョンを必要とします。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ドメイン"><a class="anchor" href="#ドメイン"></a>ドメイン</h2>
<div class="sectionbody">
<div class="paragraph">
<p>他のガイドのいくつかと同様に、アプリケーションは、果物のエンティティーを管理するものとします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.neo4j;

public class Fruit {

    public Long id;

    public String name;

    public Fruit() {
        // This is needed for the REST-Easy JSON Binding
    }

    public Fruit(String name) {
        this.name = name;
    }

    public Fruit(Long id, String name) {
        this.id = id;
        this.name = name;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="前提条件"><a class="anchor" href="#前提条件"></a>前提条件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このガイドを完成させるには、以下が必要です:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK 11+ がインストールされ、 <code>JAVA_HOME</code> が適切に設定されていること</p>
</li>
<li>
<p>IDE</p>
</li>
<li>
<p>Apache Maven 3.8.1+</p>
</li>
<li>
<p>Access to a Neo4j Database</p>
</li>
<li>
<p>オプションでシステムにDockerがインストールされていること</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="setup-neo4j"><a class="anchor" href="#setup-neo4j"></a>Setup Neo4j</h3>
<div class="paragraph">
<p>Neo4jインスタンスを起動する最も簡単な方法は、ローカルにインストールされたDocker環境です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run --publish=7474:7474 --publish=7687:7687 -e 'NEO4J_AUTH=neo4j/secret' neo4j:4.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>これは、Neo4jインスタンスを起動し、そのボルトポートを <code>7687</code> で公開し、ウェブインタフェースを <a href="http://localhost:7474" class="bare">http://localhost:7474</a> で公開します。</p>
</div>
<div class="paragraph">
<p>製品自体を起動するための他のオプションについては、 <a href="https://neo4j.com/download/?ref=product">ダウンロードページ</a> をご覧ください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ソリューション"><a class="anchor" href="#ソリューション"></a>ソリューション</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次の章で紹介する手順に沿って、ステップを踏んでアプリを作成することをお勧めします。ただし、完成した例にそのまま進んでも構いません。</p>
</div>
<div class="paragraph">
<p>Git リポジトリのクローン: git clone <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a> 、またはアーカイブをダウンロードしてください。</p>
</div>
<div class="paragraph">
<p>ソリューションは <code>neo4j-quickstart</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/main/neo4j-quickstart">ディレクトリ</a> にあります。ここで作成したJAX-RSリソースを利用するための非常にシンプルなUIも含まれています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-maven-project"><a class="anchor" href="#creating-the-maven-project"></a>Creating the Maven project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>まず、新しいプロジェクトが必要です。以下のコマンドで新規プロジェクトを作成します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn io.quarkus.platform:quarkus-maven-plugin:2.2.3.Final:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=neo4j-quickstart \
    -DclassName="org.acme.datasource.GreetingResource" \
    -Dextensions="resteasy,neo4j,resteasy-jackson"
cd neo4j-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>以下が生成されます:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mavenの構造</p>
</li>
<li>
<p>ランディングページは次のURLでアクセス可能です: <code><a href="http://localhost:8080" class="bare">http://localhost:8080</a></code></p>
</li>
<li>
<p><code>native</code> と <code>jvm</code> の両方のモードに対応した <code>Dockerfile</code> ファイルの例</p>
</li>
<li>
<p>the application configuration file</p>
</li>
<li>
<p><code>org.acme.datasource.GreetingResource</code> リソース</p>
</li>
<li>
<p>an associated test</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Neo4jエクステンションは、すでにあなたの <code>pom.xml</code> に追加されています。加えて、 <code>resteasy-jackson</code> を追加しました。これにより、JAX-RSリソースを経由して、JSON形式のHTTPで <code>Fruit</code> インスタンスを公開することができます。すでに作成したプロジェクトがある場合は、 <code>neo4j</code> エクステンションを既存のQuarkusプロジェクトに <code>add-extension</code> コマンドで追加することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:add-extension -Dextensions="neo4j"</code></pre>
</div>
</div>
<div class="paragraph">
<p>そうでなければ、 <code>pom.xml</code> ファイルの依存関係セクションに手動で追加することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-neo4j&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="設定"><a class="anchor" href="#設定"></a>設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Neo4jドライバーは、Quarkusの標準的なプロパティーで設定できます。</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.neo4j.uri = bolt://localhost:7687
quarkus.neo4j.authentication.username = neo4j
quarkus.neo4j.authentication.password = secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>上のdockerコマンドに渡した認証がここで認識されます。</p>
</div>
<div class="paragraph">
<p>これでドライバーを使用する準備ができましたが、以下に詳述する他の設定オプションがあります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ドライバーの使用"><a class="anchor" href="#ドライバーの使用"></a>ドライバーの使用</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="総論"><a class="anchor" href="#総論"></a>総論</h3>
<div class="paragraph">
<p>ステートメントの結果は通常、1つ以上の <code>org.neo4j.driver.Record</code> からなります。これらのレコードには、ドライバーがサポートする任意の値が含まれています。グラフのノードを返す場合、それは <code>org.neo4j.driver.types.Node</code> .</p>
</div>
<div class="paragraph">
<p><code>Fruit</code> に、作成のための便利なメソッドとして以下を追加しています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static Fruit from(Node node) {
    return new Fruit(node.id(), node.get("name").asString());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このように <code>FruitResource</code> のスケルトンを追加し、 <code>org.neo4j.driver.Driver</code> インスタンスを <code>@Inject</code> します。</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/acme/neo4j/FruitResource.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.neo4j;

import javax.inject.Inject;
import javax.ws.rs.Path;

import org.neo4j.driver.Driver;

@Path("fruits")
public class FruitResource {

    @Inject
    Driver driver;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ノードの読み取り"><a class="anchor" href="#ノードの読み取り"></a>ノードの読み取り</h3>
<div class="paragraph">
<p>フルーツリソースに以下のメソッドを追加します。</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/acme/neo4j/FruitResource.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@GET
public CompletionStage&lt;Response&gt; get() {
    AsyncSession session = driver.asyncSession(); <i class="conum" data-value="1"></i><b>(1)</b>
    return session
        .runAsync("MATCH (f:Fruit) RETURN f ORDER BY f.name")  <i class="conum" data-value="2"></i><b>(2)</b>
        .thenCompose(cursor -&gt;  <i class="conum" data-value="3"></i><b>(3)</b>
            cursor.listAsync(record -&gt; Fruit.from(record.get("f").asNode()))
        )
        .thenCompose(fruits -&gt;  <i class="conum" data-value="4"></i><b>(4)</b>
            session.closeAsync().thenApply(signal -&gt; fruits)
        )
        .thenApply(Response::ok) <i class="conum" data-value="5"></i><b>(5)</b>
        .thenApply(ResponseBuilder::build);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Open a new, asynchronous session with Neo4j</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>クエリを実行します。これはCypherステートメントです。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>カーソルを取得し、結果をリストし、 <code>Fruit</code> を作成します。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>処理後にセッションを閉じる</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Create a JAX-RS response</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>ここで、 <code>dev</code> モードでQuarkusを起動します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw compile quarkus:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>で、次のようにエンドポイントを取得します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/fruits</code></pre>
</div>
</div>
<div class="paragraph">
<p>果物がないので、作ってみましょう。</p>
</div>
</div>
<div class="sect2">
<h3 id="ノードの作成"><a class="anchor" href="#ノードの作成"></a>ノードの作成</h3>
<div class="paragraph">
<p><code>POST</code> メソッドは似たようなものです。これはドライバーのトランザクション関数を使用します。</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/acme/neo4j/FruitResource.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@POST
public CompletionStage&lt;Response&gt; create(Fruit fruit) {
    AsyncSession session = driver.asyncSession();
    return session
        .writeTransactionAsync(tx -&gt; tx
            .runAsync("CREATE (f:Fruit {name: $name}) RETURN f", Values.parameters("name", fruit.name))
            .thenCompose(fn -&gt; fn.singleAsync())
        )
        .thenApply(record -&gt; Fruit.from(record.get("f").asNode()))
        .thenCompose(persistedFruit -&gt; session.closeAsync().thenApply(signal -&gt; persistedFruit))
        .thenApply(persistedFruit -&gt; Response
            .created(URI.create("/fruits/" + persistedFruit.id))
            .build()
        );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ご覧のように、現在は名前付きのパラメーターを持つCypher文を使用しています(フルーツの <code>$name</code> )。ノードが返却され、 <code>Fruit</code> エンティティーが作成され、 <code>201</code> created レスポンスにマップされます。</p>
</div>
<div class="paragraph">
<p>このパスに対する curl リクエストは次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -v -X "POST" "http://localhost:8080/fruits" \
     -H 'Content-Type: application/json; charset=utf-8' \
     -d $'{
  "name": "Banana"
}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>レスポンスは、単一ノードを返すURIを含みます。</p>
</div>
</div>
<div class="sect2">
<h3 id="単一ノードの読み取り"><a class="anchor" href="#単一ノードの読み取り"></a>単一ノードの読み取り</h3>
<div class="paragraph">
<p>今回は、読み取り専用のトランザクションを要求します。また、リソースが無効な ID で呼び出された場合の例外処理も追加しています。</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/acme/neo4j/FruitResource.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@GET
@Path("{id}")
public CompletionStage&lt;Response&gt; getSingle(@PathParam("id") Long id) {
    AsyncSession session = driver.asyncSession();
    return session
        .readTransactionAsync(tx -&gt; tx
            .runAsync("MATCH (f:Fruit) WHERE id(f) = $id RETURN f", Values.parameters("id", id))
            .thenCompose(fn -&gt; fn.singleAsync())
    )
    .handle((record, exception) -&gt; {
        if(exception != null) {
            Throwable source = exception;
            if(exception instanceof CompletionException) {
                source = ((CompletionException)exception).getCause();
            }
            Status status = Status.INTERNAL_SERVER_ERROR;
            if(source instanceof NoSuchRecordException) {
                status = Status.NOT_FOUND;
            }
            return Response.status(status).build();
        } else  {
            return Response.ok(Fruit.from(record.get("f").asNode())).build();
        }
    })
    .thenCompose(response -&gt; session.closeAsync().thenApply(signal -&gt; response));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>リクエストはこのようになります:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/fruits/42</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Neo4jがクラスターとして設定されている場合、 トランザクションモードは、リクエストがリーダかフォロワーにルーティングされるかどうかを決定するために使用されます。
書き込みトランザクションはリーダーによって処理されなければなりませんが、
読み取り専用のトランザクションはフォロワーによって処理されます。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ノードの削除"><a class="anchor" href="#ノードの削除"></a>ノードの削除</h3>
<div class="paragraph">
<p>最後に、再びフルーツを削除したいので、 <code>DELETE</code> メソッドを追加します。</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/acme/neo4j/FruitResource.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DELETE
@Path("{id}")
public CompletionStage&lt;Response&gt; delete(@PathParam("id") Long id) {

    AsyncSession session = driver.asyncSession();
    return session
        .writeTransactionAsync(tx -&gt; tx
            .runAsync("MATCH (f:Fruit) WHERE id(f) = $id DELETE f", Values.parameters("id", id))
            .thenCompose(fn -&gt; fn.consumeAsync()) <i class="conum" data-value="1"></i><b>(1)</b>
        )
        .thenCompose(response -&gt; session.closeAsync())
        .thenApply(signal -&gt; Response.noContent().build());
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>結果はなく、実行されたクエリの概要だけが表示されます。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>リクエストは次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X DELETE localhost:8080/fruits/42</code></pre>
</div>
</div>
<div class="paragraph">
<p>そして、それはすでに1種類のノードを使った最もシンプルなCRUDアプリケーションです。モデルに関係性を自由に追加してください。一つのアイデアは、フルーツを含むレシピをモデル化することでしょう。紹介でリンクされているCypherのマニュアルは、クエリのモデリングに役立つでしょう。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="次のステップ"><a class="anchor" href="#次のステップ"></a>次のステップ</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="パッケージング"><a class="anchor" href="#パッケージング"></a>パッケージング</h3>
<div class="paragraph">
<p>アプリケーションのパッケージ化は <code>./mvnw clean package</code> するだけと簡単です。 <code>java -jar target/amazon-ses-quickstart-1.0-SNAPSHOT-runner.jar</code> で実行できます。</p>
</div>
<div class="paragraph">
<p>GraalVMをインストールした状態で、ネイティブの実行バイナリーを作成することもできます: <code>./mvnw clean package -Dnative</code> お使いのシステムにもよりますが、時間がかかります。</p>
</div>
</div>
<div class="sect2">
<h3 id="接続のヘルスチェック"><a class="anchor" href="#接続のヘルスチェック"></a>接続のヘルスチェック</h3>
<div class="paragraph">
<p><code>quarkus-smallrye-health</code> のエクステンションを使用している場合、 <code>quarkus-neo4j</code> は Neo4j への接続を検証するために、自動的にreadiness ヘルスチェックを追加します。</p>
</div>
<div class="paragraph">
<p>そのため、アプリケーションの <code>/q/health/ready</code> エンドポイントにアクセスすると、接続の検証状況に関する情報が表示されます。</p>
</div>
<div class="paragraph">
<p>この動作は、 <code>application.properties</code> の <code>quarkus.neo4j.health.enabled</code> プロパティーを <code>false</code> に設定することで無効にできます。</p>
</div>
</div>
<div class="sect2">
<h3 id="ドライバーメトリクス"><a class="anchor" href="#ドライバーメトリクス"></a>ドライバーメトリクス</h3>
<div class="paragraph">
<p>メトリクスエクステンションを使用していて、configプロパティー <code>quarkus.neo4j.pool.metrics-enabled=true</code> を指定している場合、Neo4jエクステンションは、Neo4j接続プールに関連したいくつかのメトリクスを公開します。</p>
</div>
</div>
<div class="sect2">
<h3 id="explore-cypher-and-the-graph"><a class="anchor" href="#explore-cypher-and-the-graph"></a>Explore Cypher and the Graph</h3>
<div class="paragraph">
<p>グラフ内でドメインをモデル化するためのオプションがたくさんあります。 <a href="https://neo4j.com/docs/">Neo4jのドキュメント</a> 、サンドボックスなどは良い出発点です。</p>
</div>
</div>
<div class="sect2">
<h3 id="reactive"><a class="anchor" href="#reactive"></a>リアクティブ型へ</h3>
<div class="paragraph">
<p>Neo4j 4.0へのアクセスがあれば、完全にリアクティブ型にすることができます。</p>
</div>
<div class="paragraph">
<p>少しでも生活を楽にするために、 <a href="https://smallrye.io/smallrye-mutiny/">Mutiny</a> を使うことにします。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Mutiny</div>
<div class="paragraph">
<p>次の例では、Mutinyのリアクティブ型を使用しています。もし慣れていない場合は、まず <a href="mutiny-primer">Mutiny - 直感的なリアクティブプログラミングライブラリ</a> を読んでください。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>次の依存関係を <code>pom.xml</code> に追加してください:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;quarkus-resteasy-mutiny&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>リアクティブフルーツリソースは、すべてのフルーツの名前をストリームします。</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/acme/neo4j/ReactiveFruitResource.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.neo4j;

import javax.inject.Inject;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import io.smallrye.mutiny.Multi;
import io.smallrye.mutiny.Uni;
import org.neo4j.driver.Driver;
import org.neo4j.driver.reactive.RxResult;
import org.reactivestreams.Publisher;


@Path("reactivefruits")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class ReactiveFruitResource {

    @Inject
    Driver driver;

    @GET
    @Produces(MediaType.SERVER_SENT_EVENTS)
    public Publisher&lt;String&gt; get() {
        // Create a stream from a resource we can close in a finalizer:
        return Multi.createFrom().resource(driver::rxSession,
                session -&gt; session.readTransaction(tx -&gt; {
                    RxResult result = tx.run("MATCH (f:Fruit) RETURN f.name as name ORDER BY f.name");
                    return Multi.createFrom().publisher(result.records())
                            .map(record -&gt; record.get("name").asString());
                })
        ).withFinalizer(session -&gt; {
            return Uni.createFrom().publisher(session.close());
        });
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>driver.rxSession()</code> はリアクティブなセッションを返します。 <a href="http://www.reactive-streams.org">リアクティブストリーム</a> に基づいた API を公開しており、最も目立つのは <code>org.reactivestreams.Publisher</code> です。これらを直接使用することもできますが、Mutiny が提供するもののようなリアクティブ型でラップした方が簡単で表現力があることがわかりました。通常、先ほどのコードでは、ストリームが完了したり、失敗したり、サブスクライバーがキャンセルしたりすると、セッションは閉じられます。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="設定リファレンス"><a class="anchor" href="#設定リファレンス"></a>設定リファレンス</h2>
<div class="sectionbody">
<div class="paragraph configuration-legend">
<p><span class="icon"><i class="fa fa-lock" title="ビルド時に固定"></i></span> ビルド時に固定される設定プロパティ - それ以外の設定プロパティは実行時に上書き可能</p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-neo4j_configuration"></a><a href="#quarkus-neo4j_configuration">Configuration property</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-neo4j_quarkus.neo4j.health.enabled"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.health.enabled">quarkus.neo4j.health.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Whether or not an health check is published in case the smallrye-health extension is present.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.uri"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.uri">quarkus.neo4j.uri</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The uri this driver should connect to. The driver supports bolt, bolt&#43;routing or neo4j as schemes.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>bolt://localhost:7687</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.encrypted"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.encrypted">quarkus.neo4j.encrypted</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If the driver should use encrypted traffic.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-neo4j_quarkus.neo4j.authentication-authentication"></a><a href="#quarkus-neo4j_quarkus.neo4j.authentication-authentication">Authentication</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.authentication.username"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.authentication.username">quarkus.neo4j.authentication.username</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The login of the user connecting to the database.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>neo4j</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.authentication.password"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.authentication.password">quarkus.neo4j.authentication.password</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The password of the user connecting to the database.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>neo4j</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.authentication.disabled"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.authentication.disabled">quarkus.neo4j.authentication.disabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Set this to true to disable authentication.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-neo4j_quarkus.neo4j.trust-settings-configure-trust-settings-for-encrypted-traffic"></a><a href="#quarkus-neo4j_quarkus.neo4j.trust-settings-configure-trust-settings-for-encrypted-traffic">Configure trust settings for encrypted traffic</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.trust-settings.strategy"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.trust-settings.strategy">quarkus.neo4j.trust-settings.strategy</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Configures which trust strategy to apply when using encrypted traffic.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>trust-all-certificates</code>, <code>trust-custom-ca-signed-certificates</code>, <code>trust-system-ca-signed-certificates</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>trust-system-ca-signed-certificates</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.trust-settings.cert-file"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.trust-settings.cert-file">quarkus.neo4j.trust-settings.cert-file</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The file of the certificate to use.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">path</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.trust-settings.hostname-verification-enabled"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.trust-settings.hostname-verification-enabled">quarkus.neo4j.trust-settings.hostname-verification-enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If hostname verification is used.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-neo4j_quarkus.neo4j.pool-connection-pool"></a><a href="#quarkus-neo4j_quarkus.neo4j.pool-connection-pool">Connection pool</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.pool.metrics.enabled"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.pool.metrics.enabled">quarkus.neo4j.pool.metrics.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Flag, if metrics are enabled.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.pool.log-leaked-sessions"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.pool.log-leaked-sessions">quarkus.neo4j.pool.log-leaked-sessions</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Flag, if leaked sessions logging is enabled.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.pool.max-connection-pool-size"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.pool.max-connection-pool-size">quarkus.neo4j.pool.max-connection-pool-size</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The maximum amount of connections in the connection pool towards a single database.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>100</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.pool.idle-time-before-connection-test"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.pool.idle-time-before-connection-test">quarkus.neo4j.pool.idle-time-before-connection-test</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Pooled connections that have been idle in the pool for longer than this timeout will be tested before they are used again. The value <code>0</code> means connections will always be tested for validity and negative values mean connections will never be tested.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-0.001S</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.pool.max-connection-lifetime"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.pool.max-connection-lifetime">quarkus.neo4j.pool.max-connection-lifetime</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Pooled connections older than this threshold will be closed and removed from the pool.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1H</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-neo4j_quarkus.neo4j.pool.connection-acquisition-timeout"></a><code><a href="#quarkus-neo4j_quarkus.neo4j.pool.connection-acquisition-timeout">quarkus.neo4j.pool.connection-acquisition-timeout</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Acquisition of new connections will be attempted for at most configured timeout.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1M</code></p></td>
</tr>
</tbody>
</table>
<div id="duration-note-anchor" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">期間フォーマットについて</div>
<div class="paragraph">
<p>期間のフォーマットは標準の <code>java.time.Duration</code> フォーマットを使用します。詳細は <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-">Duration#parse() javadoc</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>数値で始まる期間の値を指定することもできます。この場合、値が数値のみで構成されている場合、コンバーターは値を秒として扱います。そうでない場合は、 <code>PT</code> が暗黙的に値の前に付加され、標準の <code>java.time.Duration</code> 形式が得られます。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus はオープンです。このプロジェクトの全ての依存関係は<a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>または互換性のあるライセンスの元で利用出来ます。<br /><br />このウェブサイトは <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> で構築されており、<a href='https://pages.github.com/' target='_blank'>Github Pages</a>にホストされており、完全にオープンソースです。改善したい場合、 <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>ウェブサイトをフォークし</a>、修正してみせてください。</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
            <li><a href="/">ホーム</a></li>
          
            <li><a href="/about">Quarkusについて</a></li>
          
            <li><a href="/blog">ブログ</a></li>
          
            <li><a href="/insights">ポッドキャスト</a></li>
          
            <li><a href="/events">イベント</a></li>
          
            <li><a href="/newsletter">ニュースレター</a></li>
          
            <li><a href="/publications">出版</a></li>
          
            <li><a href="/awards">受賞</a></li>
          
            <li><a href="/security">セキュリティポリシー</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォロー</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">Twitter</a></li>
          
            <li><a href="https://www.facebook.com/quarkusio">Facebook</a></li>
          
            <li><a href="https://www.linkedin.com/company/quarkusio/">Linkedin</a></li>
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg">Youtube</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
            <li><a href="/support">サポート</a></li>
          
            <li><a href="/guides">ガイド</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">入門</a></li>
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions">ディスカッション</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">開発メーリングリスト</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
            <li><a href="https://quarkus.io/">English</a></li>
          
            <li><a href="https://ja.quarkus.io/">Japanese</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています：</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">等々...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
</body>

</html>
